# ValutaTrade Hub

–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫—Ä–∏–ø—Ç–æ –∏ —Ñ–∏–∞—Ç–Ω—ã—Ö –≤–∞–ª—é—Ç.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ **–ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏–ø—Ç–æ –∏ —Ñ–∏–∞—Ç–Ω—ã—Ö –≤–∞–ª—é—Ç
- ‚úÖ **–¢–æ—Ä–≥–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –ø–æ–∫—É–ø–∫–∞ –∏ –ø—Ä–æ–¥–∞–∂–∞ –≤–∞–ª—é—Ç –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫—É—Ä—Å–∞–º
- ‚úÖ **Parser Service**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö API
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ data/ # –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ ‚îú‚îÄ‚îÄ users.json # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ ‚îú‚îÄ‚îÄ portfolios.json # –ü–æ—Ä—Ç—Ñ–µ–ª–∏
‚îÇ ‚îú‚îÄ‚îÄ rates.json # –ö–µ—à –∫—É—Ä—Å–æ–≤ (–¥–ª—è Core Service)
‚îÇ ‚îî‚îÄ‚îÄ exchange_rates.json # –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (Parser Service)
‚îú‚îÄ‚îÄ valutatrade_hub/ # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ ‚îú‚îÄ‚îÄ core/ # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ models.py # –ö–ª–∞—Å—Å—ã User, Wallet, Portfolio
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ usecases.py # UserManager, PortfolioManager, RateManager
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ currencies.py # –ò–µ—Ä–∞—Ä—Ö–∏—è –≤–∞–ª—é—Ç
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ exceptions.py # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ utils.py # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ ‚îú‚îÄ‚îÄ infra/ # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ settings.py # Singleton SettingsLoader
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ database.py # Singleton DatabaseManager
‚îÇ ‚îú‚îÄ‚îÄ parser_service/ # –°–µ—Ä–≤–∏—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫—É—Ä—Å–æ–≤
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ config.py # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ api_clients.py # –ö–ª–∏–µ–Ω—Ç—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ updater.py # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ storage.py # –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ scheduler.py # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚îÇ ‚îú‚îÄ‚îÄ cli/ # –ö–æ–º–∞–Ω–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ interface.py # –í—Å–µ CLI –∫–æ–º–∞–Ω–¥—ã
‚îÇ ‚îú‚îÄ‚îÄ logging_config.py # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ ‚îî‚îÄ‚îÄ decorators.py # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä @log_action
‚îú‚îÄ‚îÄ main.py # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ pyproject.toml # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Poetry
‚îú‚îÄ‚îÄ Makefile # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
‚îî‚îÄ‚îÄ README.md # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è


## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π>
cd finalproject_<—Ñ–∞–º–∏–ª–∏—è>_<–≥—Ä—É–ø–ø–∞>

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make install

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
make project
# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
poetry run project
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
register --username alice --password 1234

# –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
login --username alice --password 1234

# –í—ã—Ö–æ–¥
logout

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
whoami
```

### –†–∞–±–æ—Ç–∞ —Å –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å (–≤ USD)
showportfolio

# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å –≤ –¥—Ä—É–≥–æ–π –≤–∞–ª—é—Ç–µ
showportfolio --base EUR

# –ö—É–ø–∏—Ç—å –≤–∞–ª—é—Ç—É
buy --currency BTC --amount 0.05

# –ü—Ä–æ–¥–∞—Ç—å –≤–∞–ª—é—Ç—É
sell --currency BTC --amount 0.01
```

### –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å –º–µ–∂–¥—É –≤–∞–ª—é—Ç–∞–º–∏
getrate --from USD --to BTC

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã –∏–∑ –∫–µ—à–∞
show-rates

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
show-rates --top 3

# –ü–æ–∫–∞–∑–∞—Ç—å –∫—É—Ä—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–∞–ª—é—Ç—ã
show-rates --currency BTC

# –ü–æ–∫–∞–∑–∞—Ç—å –∫—É—Ä—Å—ã –≤ –¥—Ä—É–≥–æ–π –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç–µ
show-rates --base EUR
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Parser Service

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã
update-rates

# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
update-rates --source coingecko

# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–∏–∞—Ç–Ω—ã–µ –≤–∞–ª—é—Ç—ã
update-rates --source exchangerate

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å Parser Service
parser-status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
exchange-stats

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫—É—Ä—Å–æ–≤
view-history --currency BTC --limit 5

# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏
cleanup-history --days 30
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Parser Service
parser-test

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
view-logs --lines 10

# –°–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç
list-currencies
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

API –∫–ª—é—á–∏
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏ –≤–∞–ª—é—Ç:
1. ExchangeRate-API (—Ñ–∏–∞—Ç–Ω—ã–µ –≤–∞–ª—é—Ç—ã):
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ exchangerate-api.com
- –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
export EXCHANGERATE_API_KEY="–≤–∞—à_–∫–ª—é—á"
```
2. CoinGecko API (–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã):
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–ª—é—á–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –∫–æ–¥–µ

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ valutatrade_hub/parser_service/config.py:
```bash
# –°–ø–∏—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç
FIAT_CURRENCIES = ("EUR", "GBP", "RUB", "JPY", "CHF")
CRYPTO_CURRENCIES = ("BTC", "ETH", "LTC", "XRP", "ADA", "SOL", "DOT")

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–µ–∫—É–Ω–¥—ã)
UPDATE_INTERVAL = 300  # 5 –º–∏–Ω—É—Ç

# TTL –∫–µ—à–∞ –∫—É—Ä—Å–æ–≤ (–º–∏–Ω—É—Ç—ã)
RATES_CACHE_TTL_MINUTES = 5
```

## ‚öôÔ∏è TTL –∫–µ—à–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤

- –ö–µ—à –∫—É—Ä—Å–æ–≤: –•—Ä–∞–Ω–∏—Ç—Å—è –≤ data/rates.json
- TTL: 5 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ settings.py)
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫—É—Ä—Å–∞, –µ—Å–ª–∏ –∫–µ—à —É—Å—Ç–∞—Ä–µ–ª, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ö–æ–º–∞–Ω–¥–∞ update-rates
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (—á–µ—Ä–µ–∑ scheduler.py)

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã

1. –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã (—á–µ—Ä–µ–∑ CoinGecko)
- BTC (Bitcoin)
- ETH (Ethereum)
- LTC (Litecoin)
- XRP (Ripple)
- ADA (Cardano)
- SOL (Solana)
- DOT (Polkadot)

–§–∏–∞—Ç–Ω—ã–µ –≤–∞–ª—é—Ç—ã (—á–µ—Ä–µ–∑ ExchangeRate-API)
- USD (US Dollar) - –±–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞
- EUR (Euro)
- GBP (British Pound)
- RUB (Russian Ruble)
- JPY (Japanese Yen)
- CHF (Swiss Franc)

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü–∞—Ä–æ–ª–∏: –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ SHA-256 —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å–æ–ª—å—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–∞–Ω–Ω—ã–µ: JSON —Ñ–∞–π–ª—ã —Å –∞—Ç–æ–º–∞—Ä–Ω–æ–π –∑–∞–ø–∏—Å—å—é (–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª ‚Üí –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è